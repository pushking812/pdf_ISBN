# ИСКЛЮЧЕНЫЕ ИЗ КОНТЕКСТА РАССМОТРЕНИЯ ПАПКИ И ФАЙЛЫ
venv/, .vscode/, .venv/, .qodo, env/, bin/, lib/, share/, include/, __pycache__/, *.pyc, *.pyo, *.pyd, LICENSE, .pytest_cache, .qodo, .ruff_cache 

# ПРАВИЛА РАБОТЫ (ЭКОНОМИЯ И КАЧЕСТВО)
- **Минимализм:** 
Всегда стремись к минимальному количеству изменений. Если можно решить задачу, изменив 1 строку, не меняй 10.

- **Язык общения и комментариев в коде:** 
Всегда используй русский язык для комментариев и сообщений в терминале.

- **Проверка перед действием:** 
Перед созданием новых файлов или рефакторингом всегда проверяй в режиме PLAN/Architect, нет ли уже готового решения в проекте.

- **Python-стиль:** 
Используй аннотации типов (Type Hinting) и следуй PEP 8.

- **Запрет на чтение:**
Никогда не читай файлы >1KB без моего одобрения.

- **Терминал:** 
Сначала проверяй наличие зависимостей (pip list), прежде чем пытаться их устанавливать.

- **Архитектура:** 
Если задача требует изменения более 3 файлов, сначала опиши архитектурную схему в чате.

- **Режим планирования (Plan/Architect):** 
Всегда начинай более менее сложные задачи в режиме Plan/Architect. 
Сначала проанализируй структуру, опиши шаги и получи "Approve" пользователя, прежде чем переходить в режим Act/Code.

- **Принцип DIFF и целостность функций:** 
Для файлов длиннее 200 строк используй инструменты частичной замены (`replace_lines` или `patch`) вместо перезаписи всего файла. 
Никогда не присылай "огрызки" кода с комментариями "# ... остальной код". Заменяемый блок должен содержать измененную функцию, метод или класс ПОЛНОСТЬЮ, чтобы сохранить синтаксическую целостность.


# СТРАТЕГИЯ ИСПОЛЬЗОВАНИЯ УТИЛИТ КОМАНДНОЙ СТРОКИ И POWERSHELL
- **Терминал vs Чтение:** 
  Если задачу можно решить через CLI (проверить наличие файла, версию библиотеки, список папок, найти положение элемента в коде) — всегда выбирай терминал. Это быстрее и дешевле, чем анализировать код глазами.

- **Работа с терминалом:** 
  Если команда завершилась с ошибкой, не пытайся угадать исправление — сначала прочитай последние 20 строк лога ошибки, проанализируй их и только потом предлагай решение.

- **Среда разработки:**
  Разработка кода осуществляется в среде Windows. Предпочитай использование PowerShell вместо bash-команд (grep, tree, rm -rf).
  Например:
  - Вместо команд Git Bash head, tail, и т.п. - используй команды аналоги из PowerShell, например: 'Get-Content "файл" -Head 30', 'Get-Content "файл" -Tail 20', 'Get-Content "файл" -Wait'.
  - Для удаление файлов, вместо `rm` используй `Remove-Item -Force -Recurse [путь]`.

- **Перед началом любой задачи (Discovery):** 
  Для получения структуры проекта сначала запусти команду tree, чтобы увидеть дерево проекта. Затем используй команды вроде `Get-ChildItem -Recurse -Depth 2 -Exclude 'venv','__pycache__'`, чтобы увидеть структуру конкретной подпапки проекта. Исключай из поиска не включенные в контекст папки и файлы.

- **При поиске определений или связей (Search):** 
  Если нужно найти, где используется элемент кода - функция/класс/метод/переменная и т.п., то используй `Select-String -Path '.\**\*.py' -Pattern 'СТРОКА_ПОИСКА'`. Чтение файла через `read_file` разрешено только ПОСЛЕ того, как ты нашел нужную строку через поиск.

- **Верификация кода после произведенных корректировок:** 
  После каждой правки в Python-файлах автоматически запускай `ruff check .` (или `python -m py_compile [file_name]`). Если найдены ошибки — исправляй их немедленно, не завершая задачу.

- **При работе с импортами (Imports):** 
  Если возникла `ImportError`, используй `Get-Content -Path 'file.py' -TotalCount 20`, чтобы быстро проверить блок импортов, не выкачивая весь файл в контекст.

- **Верификация кода:** 

  # ВЕДЕНИЕ ДОКУМЕНТАЦИИ (CONCEPTION & PROGRESS)

- **CONCEPTION.md (Архитектура):** 
  Это "священный грааль" проекта. Если в ходе задачи меняется архитектура (новые модули, смена БД, логика связей), ОБЯЗАТЕЛЬНО обнови этот файл в конце задачи. Пиши кратко и по существу.

- **PROGRESS.md (Лог изменений):** 
  После завершения каждой подзадачи или исправления бага, добавь запись в конец файла. 
  Формат: `[#Номер] [ГГГГ-ММ-ДД] - Краткое описание изменений (что сделано, какие файлы затронуты)`.
  *ВАЖНО:* Не анализируй всё содержимое этого файла перед записью. Просто дописывай (append) новую строку в конец, используя `Add-Content` в PowerShell.

- **Алгоритм работы:** 
  Перед завершением задачи (Task) проверь, нужно ли обновить `CONCEPTION.md`.
  Всегда делай запись в `PROGRESS.md` перед тем, как отчитаться о выполнении.
