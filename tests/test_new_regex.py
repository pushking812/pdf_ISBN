import re

description = "Программирование микроконтроллеров на Python : практическое руководство : учебник и задачник / Дэн Айзел. - Москва-Санкт-Петербург : Питер-Пресс, 2025 (Москва, Московская типография). - 288 с.; 21 см.; ISBN 978-5-9775-2096-6 : 1000 экз."

# Новое регулярное выражение для года
year_patterns = [
    r",\s*(\d{4})[\.\s\(]",  # год перед точкой, пробелом или скобкой
    r"(\d{4})\s*\(",  # год перед открывающей скобкой
    r"\b(\d{4})\b",  # любое четырёхзначное число (может быть риск)
]

for pat in year_patterns:
    match = re.search(pat, description)
    if match:
        print(f"Паттерн '{pat}' -> год: {match.group(1)}")
        break

# Улучшенное регулярное выражение для страниц
pages_patterns = [
    r"\.\s*-\s*(\d+)\s+с\.",  # оригинал
    r"(\d+)\s+с\.",  # просто число перед "с."
    r"\b(\d+)\s*страниц",  # если указано "страниц"
]

for pat in pages_patterns:
    match = re.search(pat, description)
    if match:
        print(f"Паттерн '{pat}' -> страницы: {match.group(1)}")
        break

# Также проверим на других возможных описаниях (из кэша)
other_descriptions = [
    "Книга / Автор. - Город : Издательство, 2020. - 150 с.",
    "Книга / Автор. - Город : Издательство, 2020 (типография). - 150 с.",
    "Книга / Автор. - Город : Издательство, 2020. - 150 страниц.",
]

for desc in other_descriptions:
    year = re.search(r",\s*(\d{4})[\.\s\(]", desc)
    pages = re.search(r"\.\s*-\s*(\d+)\s+[с\.страниц]", desc)
    print(f"\n{desc}")
    print(f"  Год: {year.group(1) if year else 'нет'}")
    print(f"  Страницы: {pages.group(1) if pages else 'нет'}")
