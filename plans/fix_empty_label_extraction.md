# План исправления извлечения значений без названия поля

## Проблема
После изменений Итерации 3 перестал работать функционал извлечения значений без названия поля (label=''). В логах видно, что паттерны генерируются, но извлечённое значение равно None.

## Анализ
1. Паттерны для пустого label генерируются корректно, но используются для других значений (из-за совпадения по label).
2. Функция `find_best_pattern` возвращает паттерн с другим value, если label совпадает (оба пустые).
3. Возможные причины возврата None:
   - Неправильный атрибут извлечения (например, href вместо text)
   - Паттерн не находит элемент на странице
   - Ошибка в функции `extract_value`

## Шаги исправления

### 1. Проверка логики выбора атрибута для пустого label
- Проанализировать код в `generate_pattern` вокруг строк 540-553
- Убедиться, что для элемента `h1` атрибут устанавливается в "text"
- Проверить условие `if label_text == "" and value_node.get_text(strip=True) == value_text:` - оно должно корректно работать

### 2. Добавление отладочной информации
- Добавить вывод атрибута в лог при генерации паттерна
- Добавить вывод атрибута в лог при извлечении значения

### 3. Восстановление оригинальной логики выбора атрибута
- Если обнаружена ошибка в логике, восстановить оригинальный код выбора атрибута
- Убедиться, что изменения Итерации 3 (аргумент --attribute) не ломают автоматический выбор

### 4. Тестирование исправления
- Запустить `debug_selectors.py --test` и проверить извлечение значений без label
- Убедиться, что значения извлекаются корректно

### 5. Обновление документации
- При необходимости обновить CONCEPTION.md
- Добавить запись в PROGRESS.md

## Критерии успеха
- Значения без названия поля извлекаются корректно (не None)
- Функционал аргумента `--attribute` продолжает работать
- Остальной функционал не сломан